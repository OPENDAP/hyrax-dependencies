dist: trusty
sudo: false
language: cpp
compiler: gcc
branches:
  only:
  - master
  - travis
addons:
  apt:
    packages:
    - uuid-dev
    - libxml2-dev
    - libcurl4-openssl-dev
    - libcppunit-dev
    - libicu-dev
before_install:
- sudo apt-get update -qq
before_script:
- export prefix=$HOME/OPENDAP/build
script:
- make -j7 for-travis
before_deploy:
- mkdir ~/package
- tar -czf ~/package/hyrax-dependencies-build.tar.gz ~/build
- ls -l ~/package
deploy:
  provider: s3
  access_key_id: AKIAJZVG7ULONJ23KRZA
  secret_access_key:
    secure: WJD2mU3sHhDU79plgjcYsAbMiHJ4Nld37H3ha1ODifRwbKNUnMYKRfXOs4EgwxNnvG1mjood/MgDJRB4Aip760ELA8MuXHQOiPtBWUTztj540QXbYbkslmI3Wa6KON6Uq+l9EZ4/RLFpQjSrN2oZ0+ZsuMEvFNfszeI6txbnbjU=
  bucket: opendap.travis.build
  skip_cleanup: true
  local_dir: ~/package
  on:
    branch:
    - master
    - travis

